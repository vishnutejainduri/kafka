    # Functions that are invoked by the binding service, which have names ending in -binding e.g. consume-sku-inventory-message-binding-service, should finish in less than 60s.
    # Functions within a sequence that is invoked by the binding service should finish in less than 60s divided by total number of steps in the sequence.
    actions:
      consume-catalog-message:
        location: ./product-consumers/consumeCatalogMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $STYLES_COLLECTION_NAME
          pricesCollectionName: $PRICES_COLLECTION_NAME
          topicName: styles-connect-jdbc-CATALOG
      consume-styles-basic-message:
        location: ./product-consumers/consumeStylesBasicMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $STYLES_COLLECTION_NAME
          algoliaDeleteCreateQueue: $ALGOLIA_DELETE_CREATE_QUEUE
          topicName: styles-basic-connect-jdbc
      consume-threshold-message:
        location: ./product-consumers/consumeThresholdMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $SKUS_COLLECTION_NAME
          styleAvailabilityCheckQueue: $STYLE_AVAILABILITY_CHECK_QUEUE
          topicName: thresholds-connect-jdbc
      consume-sale-price:
        location: ./product-consumers/consumeSalePrice/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 29000
        inputs:
          collectionName: $PRICES_COLLECTION_NAME
          topicName: sale-prices-connect-jdbc
      consume-stores-message:
        location: ./product-consumers/consumeStoresMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $STORES_COLLECTION_NAME
          inventoryCollectionName: $INVENTORY_COLLECTION_NAME
          bulkAtsRecalculateQueue: $BULK_ATS_RECALCULATE_QUEUE
          topicName: stores-connect-jdbc
      consume-sku-message:
        location: ./product-consumers/consumeSkuMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $SKUS_COLLECTION_NAME
          stylesCollectionName: $STYLES_COLLECTION_NAME
          topicName: skus-connect-jdbc
      consume-barcode-message:
        location: ./product-consumers/consumeBarcodeMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $BARCODES_COLLECTION_NAME
          topicName: barcodes-connect-jdbc
      consume-sku-inventory-message-binding-service:
        location: ./product-consumers/consumeSkuInventoryMessage/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 29000
        inputs:
          collectionName: $INVENTORY_COLLECTION_NAME
          stylesCollectionName: $STYLES_COLLECTION_NAME
          skusCollectionName: $SKUS_COLLECTION_NAME
          storesCollectionName: $STORES_COLLECTION_NAME
          styleAvailabilityCheckQueue: $STYLE_AVAILABILITY_CHECK_QUEUE
          topicName: inventory-connect-jdbc-SKUINVENTORY
      calculate-available-to-sell-binding-service:
        location: ./product-consumers/calculateAvailableToSell/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 29000
        inputs:
          mongoUri: $MONGO_URI
          mongoCertificateBase64: $MONGO_CERTIFICATE_BASE64
          dbName: $DB_NAME
          collectionName: $INVENTORY_COLLECTION_NAME
          stylesCollectionName: $STYLES_COLLECTION_NAME
          skusCollectionName: $SKUS_COLLECTION_NAME
          storesCollectionName: $STORES_COLLECTION_NAME
          styleAvailabilityCheckQueue: $STYLE_AVAILABILITY_CHECK_QUEUE
          bulkAtsRecalculateQueue: $BULK_ATS_RECALCULATE_QUEUE
          topicName: inventory-connect-jdbc-SKUINVENTORY
      update-algolia-style:
        location: ./product-consumers/updateAlgoliaStyle/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $STYLES_COLLECTION_NAME
          topicName: styles-connect-jdbc-CATALOG
      delete-create-algolia-styles:
        location: ./product-consumers/deleteCreateAlgoliaStyles/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          topicName: styles-basic-connect-jdbc
          stylesCollectionName: $STYLES_COLLECTION_NAME
          collectionName: $ALGOLIA_DELETE_CREATE_QUEUE
      update-algolia-price-binding-service:
        location: ./product-consumers/updateAlgoliaPrice/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 29000
        inputs:
          collectionName: $STYLES_COLLECTION_NAME
          pricesCollectionName: $PRICES_COLLECTION_NAME
      update-algolia-price:
        location: ./product-consumers/updateAlgoliaPrice/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $STYLES_COLLECTION_NAME
          pricesCollectionName: $PRICES_COLLECTION_NAME
      bulk-calculate-available-to-sell:
        location: ./product-consumers/bulkCalculateAvailableToSell/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $BULK_ATS_RECALCULATE_QUEUE
          styleAvailabilityCheckQueue: $STYLE_AVAILABILITY_CHECK_QUEUE
          stylesCollectionName: $STYLES_COLLECTION_NAME
          skusCollectionName: $SKUS_COLLECTION_NAME
          storesCollectionName: $STORES_COLLECTION_NAME
          inventoryCollectionName: $INVENTORY_COLLECTION_NAME
      update-algolia-inventory:
        location: ./product-consumers/updateAlgoliaAndCtInventory/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          mongoUri: $MONGO_URI
          mongoCertificateBase64: $MONGO_CERTIFICATE_BASE64
          dbName: $DB_NAME
          topicName: inventory-connect-jdbc-SKUINVENTORY
          algoliaApiKey: $ALGOLIA_API_KEY
          algoliaIndexName: $ALGOLIA_INDEX_NAME
          algoliaAppId: $ALGOLIA_APP_ID
          stylesCollectionName: $STYLES_COLLECTION_NAME
          skusCollectionName: $SKUS_COLLECTION_NAME
          collectionName: $STYLE_AVAILABILITY_CHECK_QUEUE
      update-algolia-facets:
        location: ./product-consumers/updateAlgoliaFacets/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          stylesCollectionName: $STYLES_COLLECTION_NAME
          collectionName: $ALGOLIA_FACET_BULK_IMPORT_QUEUE
      add-facets-to-bulk-import-queue:
        location: ./product-consumers/addFacetsToBulkImportQueue/dist/bundle.js
        runtime: nodejs:10
        limits:
          memorySize: 2048
          timeout: 600000
        inputs:
          collectionName: $ALGOLIA_FACET_BULK_IMPORT_QUEUE
          topicName: facets-connect-jdbc-STYLE_ITEM_CHARACTERISTICS_ECA
      schema-validation:
        location: ./product-consumers/schemaValidation/dist/bundle.js
      resolve-messages-logs:
        location: ./product-consumers/resolveMessagesLogs/dist/bundle.js
        inputs:
          maxRetries: $MAX_RETRIES
        limits:
          memorySize: 2048
          timeout: 600000
      handle-messages-logs:
        location: ./product-consumers/handleMessagesLogs/dist/bundle.js
        limits:
          memorySize: 2048
          timeout: 600000
      cleanup-messages-logs:
        location: ./product-consumers/cleanupMessagesLogs/dist/bundle.js
        inputs:
          messagesLogsPersistenceDays: $MESSAGES_LOGS_PERSISTENCE_DAYS
        limits:
          memorySize: 2048
          timeout: 600000
      remove-quantity-reserved:
        location: ./product-consumers/removeQuantityReserved/dist/bundle.js
        inputs:
          collectionName: $SKUS_COLLECTION_NAME
          styleAvailabilityCheckQueue: $STYLE_AVAILABILITY_CHECK_QUEUE
        limits:
          memorySize: 2048
          timeout: 600000
    sequences:
      update-pricing-sequence:
        actions: consume-sale-price,update-algolia-price-binding-service
      update-catalog-sequence:
        actions: consume-catalog-message,update-algolia-price
      update-inventory-sequence:
        actions: consume-sku-inventory-message-binding-service,calculate-available-to-sell-binding-service
