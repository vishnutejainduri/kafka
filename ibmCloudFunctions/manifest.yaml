packages:
  product-consumers:
    actions:
      consume-catalog-message:
        location: ./consumeCatalogMessage.js
        runtime: nodejs:10
        inputs:
          mongoUri: $MONGO_URI
          dbName: $DB_NAME
          collectionName: styles
          topicName: product-connect-jdbc-CATALOG
      consume-sku-inventory-message:
        location: ./consumeSkuInventoryMessage.js
        runtime: nodejs:10
        inputs:
          mongoUri: $MONGO_URI
          dbName: $DB_NAME
          collectionName: inventory
          topicName: inventory-connect-jdbc-SKUINVENTORY
    triggers:
      catalog-trigger:
        feed: ${FEED_BASE}/messageHubFeed
        inputs:
          isJSONData: string
          topic: product-connect-jdbc-CATALOG
      sku-inventory-trigger:
        feed: ${FEED_BASE}/messageHubFeed
        inputs:
          isJSONData: string
          topic: inventory-connect-jdbc-SKUINVENTORY
    rules:
      catalog-rule:
        action: consume-catalog-message
        trigger: catalog-trigger
      sku-inventory-rule:
        action: consume-sku-inventory-message
        trigger: sku-inventory-trigger
